% METROPOLIS PROGRESS BAR
% modify progress bar color
% \makeatletter
% \setlength{\metropolis@titleseparator@linewidth}{.93pt}
% \setlength{\metropolis@progressonsectionpage@linewidth}{.93pt}
% \setlength{\metropolis@progressinheadfoot@linewidth}{.93pt}
% \makeatother


% NAVIGATION BAR
% add option 'compress' in document class for single line navigation bar

\makeatletter
\setbeamertemplate{headline}{%

    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
    \end{beamercolorbox}

    \begin{beamercolorbox}{section in head/foot}
        \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
    \end{beamercolorbox}%

    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
    \end{beamercolorbox}
}
\setbeamercolor{section in head/foot}{fg=normal text.bg, bg=structure.fg}

% Navigation circles become squares
\setbeamertemplate{mini frame}
{%
    \begin{pgfpicture}{0pt}{0pt}{.1cm}{.1cm}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{.7*\the\beamer@boxsize}{.7*\the\beamer@boxsize}}
        \pgfusepath{fill,stroke}
    \end{pgfpicture}%
}

\setbeamertemplate{mini frame in current subsection}
{%
    \begin{pgfpicture}{0pt}{0pt}{.1cm}{.1cm}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{.7*\the\beamer@boxsize}{.7*\the\beamer@boxsize}}
        \pgfusepath{stroke}
    \end{pgfpicture}%
}
\makeatother